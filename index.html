<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Currency Converter ‚Äî Stylish</title>

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#0b1220;
    --card: rgba(255,255,255,0.06);
    --glass-border: rgba(255,255,255,0.06);
    --accent: #4f8cff;
    --accent-2: #7af0c7;
    --soft:#aab6d6;
  }

  *{box-sizing:border-box;font-family:Inter,system-ui,Arial,sans-serif}
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#071028 0%, #081627 70%);color:#e6eefb;overflow-x:hidden}

  /* rotating globe background */
  .globe-wrap{
    position:fixed; inset:0; z-index:0; pointer-events:none;
    display:flex; justify-content:center; align-items:center; opacity:0.10;
    filter: blur(2px) saturate(1.2);
  }
  .globe {
    width:140vmax; height:140vmax; /* very large so edges show on all screens */
    background-image: url("https://upload.wikimedia.org/wikipedia/commons/8/80/World_map_-_low_resolution.png");
    background-repeat: repeat;
    background-size:contain;
    transform-origin:50% 50%;
    animation: globeRotate 60s linear infinite;
    opacity:0.9;
    mix-blend-mode:screen;
    border-radius:50%;
  }
  @keyframes globeRotate {
    from { transform: rotate(0deg) translateZ(0); }
    to   { transform: rotate(360deg) translateZ(0); }
  }

  /* container */
  .page {
    position:relative; z-index:2;
    min-height:100vh;
    display:flex; align-items:center; justify-content:center;
    padding:32px;
  }

  .card {
    width:min(980px,96%);
    display:grid;
    grid-template-columns: 420px 1fr;
    gap:26px;
    background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
    border-radius:16px;
    padding:22px;
    border:1px solid var(--glass-border);
    backdrop-filter: blur(10px) saturate(1.1);
    box-shadow: 0 10px 40px rgba(4,10,20,0.6);
    align-items:start;
  }

  /* left column: converter */
  .left {
    padding:18px;
    border-radius:12px;
  }

  h1{margin:0 0 8px 0; font-size:20px; font-weight:600; color:#eaf2ff}
  p.lead{margin:0 0 18px 0; color:var(--soft); font-size:13px}

  label{display:block; font-size:12px; color:var(--soft); margin-top:10px; margin-bottom:6px}
  .search {
    display:flex; gap:8px; margin-bottom:8px;
  }
  .search input[type="text"]{
    flex:1; padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,0.06);
    background: rgba(255,255,255,0.02); color: #eaf2ff; outline:none;
  }
  select {
    width:100%; padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,0.06);
    background: rgba(255,255,255,0.02); color:#eaf2ff; font-size:14px;
  }
  input[type="number"]{
    width:100%; padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,0.06);
    background: rgba(255,255,255,0.02); color:#eaf2ff; font-size:16px;
    margin-top:8px;
  }

  .controls {
    display:flex; gap:10px; margin-top:12px; align-items:center;
  }
  .btn {
    background: linear-gradient(90deg,var(--accent), #2aa7ff 60%); border:none; color:white;
    padding:12px 16px; border-radius:10px; cursor:pointer; font-weight:600;
    box-shadow: 0 8px 18px rgba(78,140,255,0.12);
    transition: transform .18s ease, box-shadow .18s ease;
  }
  .btn:hover { transform: translateY(-3px); box-shadow: 0 16px 30px rgba(78,140,255,0.18) }
  .btn.secondary {
    background: rgba(255,255,255,0.03); color:var(--soft); font-weight:600;
    border:1px solid rgba(255,255,255,0.04);
  }

  .swap-btn {display:inline-flex; align-items:center; justify-content:center; width:46px; height:46px; border-radius:10px;}

  .result {
    margin-top:14px; font-size:16px; color:#dff7ff; font-weight:600;
    padding:12px; border-radius:10px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.015));
    border:1px solid rgba(255,255,255,0.03);
  }

  /* right column: chart + history */
  .right {
    padding:18px;
    display:flex; flex-direction:column; gap:12px;
    min-height:320px;
  }

  .chart-card {
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    padding:12px; border-radius:12px; height:100%;
    border:1px solid rgba(255,255,255,0.03);
  }

  canvas { width:100% !important; height:260px !important; }

  .history {
    margin-top:6px; max-height:160px; overflow:auto; padding:10px; border-radius:10px;
    background: rgba(255,255,255,0.01); border:1px dashed rgba(255,255,255,0.02);
    color:var(--soft); font-size:13px;
  }
  .history-item { padding:8px; border-radius:8px; margin-bottom:6px; background: rgba(255,255,255,0.01); }
  .hint { font-size:12px; color:var(--soft); margin-top:8px }

  /* responsive */
  @media (max-width:880px){
    .card { grid-template-columns: 1fr; }
    canvas{ height:200px !important }
  }
</style>
</head>
<body>

<!-- Rotating globe background -->
<div class="globe-wrap" aria-hidden="true">
  <div class="globe" role="img" aria-label="rotating globe background"></div>
</div>

<div class="page">
  <div class="card">

    <!-- LEFT: Converter -->
    <div class="left">
      <h1>üåç Currency Converter</h1>
      <p class="lead">Fast offline conversions using your rate table ‚Äî animated globe & comparison chart included.</p>

      <label for="searchFrom">Search input currency</label>
      <div class="search">
        <input id="searchFrom" placeholder="Type code or country (e.g. USD or India)" />
        <button class="btn secondary swap-btn" id="swapBtn" title="Swap currencies">üîÅ</button>
      </div>
      <select id="fromSelect" size="6" aria-label="From currency"></select>

      <label for="searchTo">Search output currency</label>
      <div class="search">
        <input id="searchTo" placeholder="Type code or country (e.g. INR or Japan)" />
        <button class="btn secondary" id="favoriteBtn" title="Add/Remove favorite">‚òÖ</button>
      </div>
      <select id="toSelect" size="6" aria-label="To currency"></select>

      <label for="amount">Amount</label>
      <input id="amount" type="number" placeholder="Enter amount (e.g. 100)" />

      <div class="controls">
        <button class="btn" id="convertBtn">Convert</button>
        <button class="btn secondary" id="clearHistoryBtn">Clear</button>
      </div>

      <div class="result" id="resultText">Enter values and click Convert</div>
      <div class="hint">Tip: click a history item to load that conversion</div>
    </div>

    <!-- RIGHT: Chart + History -->
    <div class="right">
      <div class="chart-card">
        <canvas id="chartCanvas" aria-label="conversion chart"></canvas>
      </div>

      <div class="history" id="historyList">
        <!-- conversion history -->
      </div>
    </div>

  </div>
</div>

<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
/* -------------------------
   Data: currency + rates
   (Copied from your C program)
-------------------------- */
const currencyData = [
{code:"USD", country:"United States", flag:"üá∫üá∏"},
{code:"EUR", country:"European Union", flag:"üá™üá∫"},
{code:"JPY", country:"Japan", flag:"üáØüáµ"},
{code:"GBP", country:"United Kingdom", flag:"üá¨üáß"},
{code:"AUD", country:"Australia", flag:"üá¶üá∫"},
{code:"CAD", country:"Canada", flag:"üá®üá¶"},
{code:"CHF", country:"Switzerland", flag:"üá®üá≠"},
{code:"CNY", country:"China", flag:"üá®üá≥"},
{code:"HKD", country:"Hong Kong", flag:"üá≠üá∞"},
{code:"NZD", country:"New Zealand", flag:"üá≥üáø"},
{code:"SEK", country:"Sweden", flag:"üá∏üá™"},
{code:"KRW", country:"South Korea", flag:"üá∞üá∑"},
{code:"SGD", country:"Singapore", flag:"üá∏üá¨"},
{code:"NOK", country:"Norway", flag:"üá≥üá¥"},
{code:"MXN", country:"Mexico", flag:"üá≤üáΩ"},
{code:"INR", country:"India", flag:"üáÆüá≥"},
{code:"RUB", country:"Russia", flag:"üá∑üá∫"},
{code:"ZAR", country:"South Africa", flag:"üáøüá¶"},
{code:"TRY", country:"Turkey", flag:"üáπüá∑"},
{code:"BRL", country:"Brazil", flag:"üáßüá∑"},
{code:"TWD", country:"Taiwan", flag:"üáπüáº"},
{code:"DKK", country:"Denmark", flag:"üá©üá∞"},
{code:"PLN", country:"Poland", flag:"üáµüá±"},
{code:"THB", country:"Thailand", flag:"üáπüá≠"},
{code:"IDR", country:"Indonesia", flag:"üáÆüá©"},
{code:"HUF", country:"Hungary", flag:"üá≠üá∫"},
{code:"CZK", country:"Czech Republic", flag:"üá®üáø"},
{code:"ILS", country:"Israel", flag:"üáÆüá±"},
{code:"CLP", country:"Chile", flag:"üá®üá±"},
{code:"PHP", country:"Philippines", flag:"üáµüá≠"},
{code:"AED", country:"UAE", flag:"üá¶üá™"},
{code:"COP", country:"Colombia", flag:"üá®üá¥"},
{code:"SAR", country:"Saudi Arabia", flag:"üá∏üá¶"},
{code:"MYR", country:"Malaysia", flag:"üá≤üáæ"},
{code:"RON", country:"Romania", flag:"üá∑üá¥"},
{code:"PKR", country:"Pakistan", flag:"üáµüá∞"},
{code:"QAR", country:"Qatar", flag:"üá∂üá¶"},
{code:"KWD", country:"Kuwait", flag:"üá∞üáº"},
{code:"NGN", country:"Nigeria", flag:"üá≥üá¨"},
{code:"BDT", country:"Bangladesh", flag:"üáßüá©"},
{code:"EGP", country:"Egypt", flag:"üá™üá¨"},
{code:"VND", country:"Vietnam", flag:"üáªüá≥"},
{code:"KZT", country:"Kazakhstan", flag:"üá∞üáø"},
{code:"ARS", country:"Argentina", flag:"üá¶üá∑"},
{code:"DZD", country:"Algeria", flag:"üá©üáø"},
{code:"MAD", country:"Morocco", flag:"üá≤üá¶"},
{code:"PEN", country:"Peru", flag:"üáµüá™"},
{code:"UAH", country:"Ukraine", flag:"üá∫üá¶"},
{code:"IQD", country:"Iraq", flag:"üáÆüá∂"},
{code:"UZS", country:"Uzbekistan", flag:"üá∫üáø"},
{code:"GHS", country:"Ghana", flag:"üá¨üá≠"},
{code:"XOF", country:"West Africa", flag:"üåç"},
{code:"XAF", country:"Central Africa", flag:"üåç"},
{code:"KES", country:"Kenya", flag:"üá∞üá™"},
{code:"TND", country:"Tunisia", flag:"üáπüá≥"},
{code:"BHD", country:"Bahrain", flag:"üáßüá≠"},
{code:"OMR", country:"Oman", flag:"üá¥üá≤"},
{code:"LKR", country:"Sri Lanka", flag:"üá±üá∞"},
{code:"MMK", country:"Myanmar", flag:"üá≤üá≤"},
{code:"ETB", country:"Ethiopia", flag:"üá™üáπ"},
{code:"BGN", country:"Bulgaria", flag:"üáßüá¨"},
{code:"HRK", country:"Croatia", flag:"üá≠üá∑"},
{code:"CRC", country:"Costa Rica", flag:"üá®üá∑"},
{code:"GTQ", country:"Guatemala", flag:"üá¨üáπ"},
{code:"PAB", country:"Panama", flag:"üáµüá¶"},
{code:"UYU", country:"Uruguay", flag:"üá∫üáæ"},
{code:"BWP", country:"Botswana", flag:"üáßüáº"},
{code:"NAD", country:"Namibia", flag:"üá≥üá¶"},
{code:"BND", country:"Brunei", flag:"üáßüá≥"},
{code:"SRD", country:"Suriname", flag:"üá∏üá∑"},
{code:"BZD", country:"Belize", flag:"üáßüáø"},
{code:"JMD", country:"Jamaica", flag:"üáØüá≤"},
{code:"TTD", country:"Trinidad & Tobago", flag:"üáπüáπ"},
{code:"BSD", country:"Bahamas", flag:"üáßüá∏"},
{code:"ALL", country:"Albania", flag:"üá¶üá±"},
{code:"MKD", country:"North Macedonia", flag:"üá≤üá∞"},
{code:"GEL", country:"Georgia", flag:"üá¨üá™"},
{code:"MDL", country:"Moldova", flag:"üá≤üá©"},
{code:"AZN", country:"Azerbaijan", flag:"üá¶üáø"},
{code:"AMD", country:"Armenia", flag:"üá¶üá≤"},
{code:"KYD", country:"Cayman Islands", flag:"üá∞üáæ"},
{code:"MUR", country:"Mauritius", flag:"üá≤üá∫"},
{code:"MGA", country:"Madagascar", flag:"üá≤üá¨"},
{code:"MWK", country:"Malawi", flag:"üá≤üáº"},
{code:"ZMW", country:"Zambia", flag:"üáøüá≤"},
{code:"BBD", country:"Barbados", flag:"üáßüáß"},
{code:"SCR", country:"Seychelles", flag:"üá∏üá®"},
{code:"NPR", country:"Nepal", flag:"üá≥üáµ"},
{code:"KGS", country:"Kyrgyzstan", flag:"üá∞üá¨"},
{code:"LAK", country:"Laos", flag:"üá±üá¶"},
{code:"KHR", country:"Cambodia", flag:"üá∞üá≠"},
{code:"YER", country:"Yemen", flag:"üáæüá™"},
{code:"AFN", country:"Afghanistan", flag:"üá¶üá´"},
{code:"IRR", country:"Iran", flag:"üáÆüá∑"},
{code:"SDG", country:"Sudan", flag:"üá∏üá©"},
{code:"LYD", country:"Libya", flag:"üá±üáæ"},
{code:"CDF", country:"DR Congo", flag:"üá®üá©"},
{code:"BIF", country:"Burundi", flag:"üáßüáÆ"},
{code:"RWF", country:"Rwanda", flag:"üá∑üáº"},
{code:"DJF", country:"Djibouti", flag:"üá©üáØ"},
{code:"SLL", country:"Sierra Leone", flag:"üá∏üá±"},
{code:"GNF", country:"Guinea", flag:"üá¨üá≥"},
{code:"MZN", country:"Mozambique", flag:"üá≤üáø"},
{code:"SZL", country:"Eswatini", flag:"üá∏üáø"},
{code:"LSL", country:"Lesotho", flag:"üá±üá∏"},
{code:"PGK", country:"Papua New Guinea", flag:"üáµüá¨"},
{code:"FJD", country:"Fiji", flag:"üá´üáØ"},
{code:"TOP", country:"Tonga", flag:"üáπüá¥"},
{code:"WST", country:"Samoa", flag:"üáºüá∏"},
{code:"VUV", country:"Vanuatu", flag:"üáªüá∫"},
{code:"HTG", country:"Haiti", flag:"üá≠üáπ"},
{code:"HNL", country:"Honduras", flag:"üá≠üá≥"},
{code:"NIO", country:"Nicaragua", flag:"üá≥üáÆ"},
{code:"BOB", country:"Bolivia", flag:"üáßüá¥"},
{code:"PYG", country:"Paraguay", flag:"üáµüáæ"},
{code:"GYD", country:"Guyana", flag:"üá¨üáæ"},
{code:"SOS", country:"Somalia", flag:"üá∏üá¥"},
{code:"BTN", country:"Bhutan", flag:"üáßüáπ"},
{code:"TJS", country:"Tajikistan", flag:"üáπüáØ"},
{code:"ISK", country:"Iceland", flag:"üáÆüá∏"},
{code:"FKP", country:"Falkland Islands", flag:"üá´üá∞"},
{code:"SHP", country:"Saint Helena", flag:"üá∏üá≠"},
{code:"GIP", country:"Gibraltar", flag:"üá¨üáÆ"},
{code:"ANG", country:"Cura√ßao", flag:"üá®üáº"},
{code:"AWG", country:"Aruba", flag:"üá¶üáº"},
{code:"ERN", country:"Eritrea", flag:"üá™üá∑"}
];

const rate = [
1.0000,0.8585,155.1985,0.7497,1.5077,1.3860,0.8042,7.0819,7.7847,1.7316,
9.4052,1472.1006,1.2955,10.1035,18.1950,90.0251,76.9536,16.9389,42.5500,5.3108,
31.2732,6.4069,3.6322,31.8771,16679.1992,327.8412,20.7797,3.2375,917.6757,59.0097,
3.6725,3785.5315,3.7500,4.1115,4.3693,282.4023,3.6400,0.3068,1449.7699,122.3576,
47.5672,26273.1973,505.2302,1438.5800,130.0949,9.2359,3.3660,42.1737,1311.2258,11938.9570,
11.6113,563.2733,563.2733,129.2873,2.9397,0.3760,0.3845,308.7095,2104.2200,153.6532,
1.6795,6.4699,491.8636,7.6630,1.0000,39.2391,13.8690,16.9389,
1.2955,38.5118,2.0000,160.2951,6.7369,1.0000,82.8927,52.8931,2.7003,16.9953,
1.7005,381.2394,0.8333,46.0072,4466.7222,1745.0050,23.0516,2.0000,13.7307,144.0398,
87.3515,21782.9141,4016.0137,238.5187,66.2641,42266.0586,509.3738,
5.4444,2217.1096,2963.9761,1458.0897,177.7210,22962.8242,8702.1338,63.5898,921.5621,
16.9389,4.2462,2.2650,2.4172,2.7678,122.2887,130.8981,8.0183,7.6630,7.6630,
10914.0,208.0,10.9,1.25,1.73,1.27,1.71,1.00,1.79,1.80,15.0
];

/* -------------------------
   Populate selects + search
-------------------------- */
const fromSelect = document.getElementById('fromSelect');
const toSelect = document.getElementById('toSelect');
const searchFrom = document.getElementById('searchFrom');
const searchTo = document.getElementById('searchTo');

function makeOption(item){
  return `${item.flag} ${item.code} - ${item.country}`;
}

function populate(selectEl, list){
  selectEl.innerHTML = '';
  list.forEach(item => {
    const o = document.createElement('option');
    o.value = item.code;
    o.textContent = makeOption(item);
    selectEl.appendChild(o);
  });
}

// default populate
populate(fromSelect, currencyData);
populate(toSelect, currencyData);

// filter functions
function filterList(query){
  const q = (query||'').toLowerCase();
  return currencyData.filter(c => 
    c.code.toLowerCase().includes(q) ||
    c.country.toLowerCase().includes(q) ||
    c.flag.includes(q)
  );
}

searchFrom.addEventListener('input', e => {
  populate(fromSelect, filterList(e.target.value));
});
searchTo.addEventListener('input', e => {
  populate(toSelect, filterList(e.target.value));
});

/* -------------------------
   Conversion & UI logic
-------------------------- */
const amountInput = document.getElementById('amount');
const convertBtn = document.getElementById('convertBtn');
const swapBtn = document.getElementById('swapBtn');
const resultText = document.getElementById('resultText');
const historyList = document.getElementById('historyList');
const clearHistoryBtn = document.getElementById('clearHistoryBtn');
const favoriteBtn = document.getElementById('favoriteBtn');

let conversionHistory = [];
let chartInstance = null;

function findIndexByCode(code){
  return currencyData.findIndex(c => c.code === code);
}

function convertAndShow(){
  const x = fromSelect.value;
  const y = toSelect.value;
  const amount = parseFloat(amountInput.value);
  if (isNaN(amount)){
    resultText.textContent = 'Enter a valid amount';
    return;
  }
  const inIndex = findIndexByCode(x);
  const outIndex = findIndexByCode(y);
  if (inIndex === -1 || outIndex === -1){
    resultText.textContent = 'Currency error';
    return;
  }

  // same formula as C program
  const baseValue = amount / rate[inIndex];
  const finalValue = baseValue * rate[outIndex];

  const finalRounded = parseFloat(finalValue.toFixed(2));
  resultText.textContent = `${amount} ${x} = ${finalRounded} ${y}`;

  // push to history (limit 8)
  conversionHistory.unshift({from:x,to:y,amount,converted:finalRounded, time: new Date().toLocaleString()});
  if (conversionHistory.length>8) conversionHistory.pop();
  renderHistory();

  // update chart
  updateChart(amount, finalRounded, x, y);
}

convertBtn.addEventListener('click', convertAndShow);

swapBtn.addEventListener('click', () => {
  // swap selections & result
  const a = fromSelect.selectedIndex;
  const b = toSelect.selectedIndex;
  // swap the selected values and also texts
  const prevFrom = fromSelect.value;
  const prevTo = toSelect.value;
  // set selection by value
  fromSelect.value = prevTo;
  toSelect.value = prevFrom;
  // update search fields and clear result
  searchFrom.value = '';
  searchTo.value = '';
  resultText.textContent = 'Swapped ‚Äî click Convert';
});

clearHistoryBtn.addEventListener('click', () => {
  conversionHistory = [];
  renderHistory();
});

function renderHistory(){
  historyList.innerHTML = '';
  if (conversionHistory.length === 0){
    historyList.textContent = 'No conversions yet ‚Äî results will appear here.';
    return;
  }
  conversionHistory.forEach((h, idx) => {
    const el = document.createElement('div');
    el.className = 'history-item';
    el.innerHTML = `<div><strong>${h.amount} ${h.from} ‚Üí ${h.converted} ${h.to}</strong></div>
                    <div style="font-size:12px;color:var(--soft)">${h.time}</div>`;
    el.addEventListener('click', () => {
      // load into selects and amount for quick repeat
      fromSelect.value = h.from;
      toSelect.value = h.to;
      amountInput.value = h.amount;
      resultText.textContent = `${h.amount} ${h.from} = ${h.converted} ${h.to}`;
      updateChart(h.amount, h.converted, h.from, h.to);
    });
    historyList.appendChild(el);
  });
}

/* -------------------------
    Chart.js ‚Äî bar graph
-------------------------- */
function updateChart(valFrom, valTo, labelFrom, labelTo){
  const ctx = document.getElementById('chartCanvas').getContext('2d');

  const numericFrom = Number(valFrom);
  const numericTo = Number(valTo);

  const data = {
    labels: [labelFrom, labelTo],
    datasets: [{
      label: 'Amount comparison',
      data: [numericFrom, numericTo],
      backgroundColor: ['rgba(79,140,255,0.9)', 'rgba(122,240,199,0.9)'],
      borderRadius:6
    }]
  };

  const options = {
    responsive:true,
    plugins: { legend: { display:false } },
    scales: { y: { beginAtZero:true } }
  };

  if (chartInstance) chartInstance.destroy();
  chartInstance = new Chart(ctx, { type:'bar', data, options });
}

/* -------------------------
   Initial UI setup
-------------------------- */
(function init(){
  // default selections
  fromSelect.value = 'USD';
  toSelect.value = 'INR';
  amountInput.value = 100;

  renderHistory();
  // draw initial chart with placeholder values
  updateChart(100, (100 / rate[ findIndexByCode('USD') ]) * rate[ findIndexByCode('INR') ], 'USD','INR');
})();

/* -------------------------
   Optional: favorites (simple toggle)
-------------------------- */
let favorites = new Set();
favoriteBtn.addEventListener('click', () => {
  const cur = toSelect.value;
  if (favorites.has(cur)) {
    favorites.delete(cur);
    favoriteBtn.textContent = '‚òÖ';
    favoriteBtn.title = 'Add/Remove favorite';
  } else {
    favorites.add(cur);
    favoriteBtn.textContent = '‚òÖ'; // visually the same - you can style differently
    favoriteBtn.title = 'Marked favorite';
  }
});

</script>
</body>
</html>
